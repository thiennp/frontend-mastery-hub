<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 2 - Object-Oriented Programming Examples</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .example {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #dc3545;
            border-radius: 4px;
        }
        .output {
            background: #000;
            color: #0f0;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #c82333;
        }
        .code {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Level 2 - Object-Oriented Programming Examples</h1>
    
    <div class="example">
        <h3>1. Classes and Objects</h3>
        <p>Demonstrates class creation, constructors, and methods</p>
        <button onclick="runClassExamples()">Run Examples</button>
        <div id="class-output" class="output"></div>
    </div>

    <div class="example">
        <h3>2. Inheritance</h3>
        <p>Demonstrates class inheritance and method overriding</p>
        <button onclick="runInheritanceExamples()">Run Examples</button>
        <div id="inheritance-output" class="output"></div>
    </div>

    <div class="example">
        <h3>3. Encapsulation</h3>
        <p>Demonstrates private fields, getters, and setters</p>
        <button onclick="runEncapsulationExamples()">Run Examples</button>
        <div id="encapsulation-output" class="output"></div>
    </div>

    <div class="example">
        <h3>4. Polymorphism and Design Patterns</h3>
        <p>Demonstrates polymorphism and common design patterns</p>
        <button onclick="runPolymorphismExamples()">Run Examples</button>
        <div id="polymorphism-output" class="output"></div>
    </div>

    <script>
        // Utility function to display output
        function displayOutput(elementId, content) {
            const element = document.getElementById(elementId);
            element.innerHTML = content;
        }

        // 1. Class Examples
        function runClassExamples() {
            let output = '';
            
            // Basic class
            output += '=== Basic Class ===\n';
            class Person {
                constructor(name, age) {
                    this.name = name;
                    this.age = age;
                }
                
                greet() {
                    return `Hello, I'm ${this.name}`;
                }
                
                getAge() {
                    return this.age;
                }
                
                setAge(age) {
                    if (age >= 0) {
                        this.age = age;
                    }
                }
            }
            
            let person = new Person('John', 30);
            output += person.greet() + '\n';
            output += `Age: ${person.getAge()}\n`;
            person.setAge(31);
            output += `New age: ${person.getAge()}\n`;
            
            // Class with static methods
            output += '\n=== Static Methods ===\n';
            class MathUtils {
                static add(a, b) {
                    return a + b;
                }
                
                static multiply(a, b) {
                    return a * b;
                }
                
                static isEven(number) {
                    return number % 2 === 0;
                }
            }
            
            output += `Add: ${MathUtils.add(5, 3)}\n`;
            output += `Multiply: ${MathUtils.multiply(4, 6)}\n`;
            output += `Is 4 even: ${MathUtils.isEven(4)}\n`;
            
            // Class with getters and setters
            output += '\n=== Getters and Setters ===\n';
            class Rectangle {
                constructor(width, height) {
                    this._width = width;
                    this._height = height;
                }
                
                get area() {
                    return this._width * this._height;
                }
                
                get perimeter() {
                    return 2 * (this._width + this._height);
                }
                
                get width() {
                    return this._width;
                }
                
                set width(value) {
                    if (value > 0) {
                        this._width = value;
                    }
                }
                
                get height() {
                    return this._height;
                }
                
                set height(value) {
                    if (value > 0) {
                        this._height = value;
                    }
                }
            }
            
            let rect = new Rectangle(5, 3);
            output += `Area: ${rect.area}\n`;
            output += `Perimeter: ${rect.perimeter}\n`;
            rect.width = 10;
            output += `New area: ${rect.area}\n`;
            
            displayOutput('class-output', output);
        }

        // 2. Inheritance Examples
        function runInheritanceExamples() {
            let output = '';
            
            // Basic inheritance
            output += '=== Basic Inheritance ===\n';
            class Animal {
                constructor(name, species) {
                    this.name = name;
                    this.species = species;
                }
                
                speak() {
                    return `${this.name} makes a sound`;
                }
                
                move() {
                    return `${this.name} moves`;
                }
            }
            
            class Dog extends Animal {
                constructor(name, breed) {
                    super(name, 'Canine');
                    this.breed = breed;
                }
                
                speak() {
                    return `${this.name} barks`;
                }
                
                fetch() {
                    return `${this.name} fetches the ball`;
                }
            }
            
            let dog = new Dog('Buddy', 'Golden Retriever');
            output += dog.speak() + '\n';
            output += dog.move() + '\n';
            output += dog.fetch() + '\n';
            
            // Method overriding
            output += '\n=== Method Overriding ===\n';
            class Shape {
                constructor(name) {
                    this.name = name;
                }
                
                area() {
                    return 0;
                }
                
                perimeter() {
                    return 0;
                }
            }
            
            class Circle extends Shape {
                constructor(radius) {
                    super('Circle');
                    this.radius = radius;
                }
                
                area() {
                    return Math.PI * this.radius * this.radius;
                }
                
                perimeter() {
                    return 2 * Math.PI * this.radius;
                }
            }
            
            class Rectangle extends Shape {
                constructor(width, height) {
                    super('Rectangle');
                    this.width = width;
                    this.height = height;
                }
                
                area() {
                    return this.width * this.height;
                }
                
                perimeter() {
                    return 2 * (this.width + this.height);
                }
            }
            
            let circle = new Circle(5);
            let rectangle = new Rectangle(4, 6);
            
            output += `Circle area: ${circle.area().toFixed(2)}\n`;
            output += `Rectangle area: ${rectangle.area()}\n`;
            
            // Super keyword
            output += '\n=== Super Keyword ===\n';
            class Vehicle {
                constructor(brand, model, year) {
                    this.brand = brand;
                    this.model = model;
                    this.year = year;
                }
                
                start() {
                    return `${this.brand} ${this.model} started`;
                }
                
                getInfo() {
                    return `${this.year} ${this.brand} ${this.model}`;
                }
            }
            
            class Car extends Vehicle {
                constructor(brand, model, year, doors) {
                    super(brand, model, year);
                    this.doors = doors;
                }
                
                start() {
                    return super.start() + ' with engine running';
                }
                
                getInfo() {
                    return super.getInfo() + ` with ${this.doors} doors`;
                }
            }
            
            let car = new Car('Toyota', 'Camry', 2023, 4);
            output += car.start() + '\n';
            output += car.getInfo() + '\n';
            
            displayOutput('inheritance-output', output);
        }

        // 3. Encapsulation Examples
        function runEncapsulationExamples() {
            let output = '';
            
            // Private fields (ES2022)
            output += '=== Private Fields ===\n';
            class BankAccount {
                #balance;
                #accountNumber;
                
                constructor(accountNumber, initialBalance = 0) {
                    this.#accountNumber = accountNumber;
                    this.#balance = initialBalance;
                }
                
                deposit(amount) {
                    if (amount > 0) {
                        this.#balance += amount;
                    }
                }
                
                withdraw(amount) {
                    if (amount > 0 && amount <= this.#balance) {
                        this.#balance -= amount;
                    }
                }
                
                getBalance() {
                    return this.#balance;
                }
                
                getAccountNumber() {
                    return this.#accountNumber;
                }
            }
            
            let account = new BankAccount('123456', 1000);
            output += `Account: ${account.getAccountNumber()}\n`;
            output += `Balance: ${account.getBalance()}\n`;
            account.deposit(500);
            output += `After deposit: ${account.getBalance()}\n`;
            account.withdraw(200);
            output += `After withdrawal: ${account.getBalance()}\n`;
            
            // Private methods
            output += '\n=== Private Methods ===\n';
            class User {
                #password;
                
                constructor(username, email, password) {
                    this.username = username;
                    this.email = email;
                    this.#password = password;
                }
                
                #validatePassword(password) {
                    return password.length >= 8 && /[A-Z]/.test(password) && /[0-9]/.test(password);
                }
                
                changePassword(oldPassword, newPassword) {
                    if (oldPassword !== this.#password) {
                        return 'Current password is incorrect';
                    }
                    
                    if (!this.#validatePassword(newPassword)) {
                        return 'New password must be at least 8 characters with uppercase letter and number';
                    }
                    
                    this.#password = newPassword;
                    return 'Password changed successfully';
                }
                
                authenticate(password) {
                    return password === this.#password;
                }
            }
            
            let user = new User('john', 'john@example.com', 'OldPass123');
            output += `Password change: ${user.changePassword('OldPass123', 'NewPass456')}\n`;
            output += `Authentication: ${user.authenticate('NewPass456')}\n`;
            
            // Closures for encapsulation (Pre-ES2022)
            output += '\n=== Closures for Encapsulation ===\n';
            function createCounter(initialValue = 0) {
                let count = initialValue;
                
                return {
                    increment: () => ++count,
                    decrement: () => --count,
                    getValue: () => count,
                    reset: () => count = initialValue
                };
            }
            
            let counter = createCounter(10);
            output += `Initial: ${counter.getValue()}\n`;
            output += `Increment: ${counter.increment()}\n`;
            output += `Increment: ${counter.increment()}\n`;
            output += `Decrement: ${counter.decrement()}\n`;
            output += `Final: ${counter.getValue()}\n`;
            
            displayOutput('encapsulation-output', output);
        }

        // 4. Polymorphism and Design Patterns Examples
        function runPolymorphismExamples() {
            let output = '';
            
            // Polymorphism
            output += '=== Polymorphism ===\n';
            class Animal {
                makeSound() {
                    return 'Some generic animal sound';
                }
            }
            
            class Dog extends Animal {
                makeSound() {
                    return 'Woof!';
                }
            }
            
            class Cat extends Animal {
                makeSound() {
                    return 'Meow!';
                }
            }
            
            class Bird extends Animal {
                makeSound() {
                    return 'Tweet!';
                }
            }
            
            let animals = [new Dog(), new Cat(), new Bird()];
            animals.forEach(animal => {
                output += animal.makeSound() + '\n';
            });
            
            // Factory Pattern
            output += '\n=== Factory Pattern ===\n';
            class VehicleFactory {
                static createVehicle(type, ...args) {
                    switch (type) {
                        case 'car':
                            return new Car(...args);
                        case 'truck':
                            return new Truck(...args);
                        case 'motorcycle':
                            return new Motorcycle(...args);
                        default:
                            throw new Error(`Unknown vehicle type: ${type}`);
                    }
                }
            }
            
            class Car {
                constructor(brand, model) {
                    this.brand = brand;
                    this.model = model;
                    this.type = 'car';
                }
            }
            
            class Truck {
                constructor(brand, model, payload) {
                    this.brand = brand;
                    this.model = model;
                    this.payload = payload;
                    this.type = 'truck';
                }
            }
            
            class Motorcycle {
                constructor(brand, model) {
                    this.brand = brand;
                    this.model = model;
                    this.type = 'motorcycle';
                }
            }
            
            let car = VehicleFactory.createVehicle('car', 'Toyota', 'Camry');
            let truck = VehicleFactory.createVehicle('truck', 'Ford', 'F-150', 1000);
            
            output += `Car: ${car.brand} ${car.model}\n`;
            output += `Truck: ${truck.brand} ${truck.model} (${truck.payload}kg)\n`;
            
            // Singleton Pattern
            output += '\n=== Singleton Pattern ===\n';
            class DatabaseManager {
                static instance = null;
                
                constructor() {
                    if (DatabaseManager.instance) {
                        return DatabaseManager.instance;
                    }
                    
                    this.connection = null;
                    this.isConnected = false;
                    DatabaseManager.instance = this;
                }
                
                static getInstance() {
                    if (!DatabaseManager.instance) {
                        DatabaseManager.instance = new DatabaseManager();
                    }
                    return DatabaseManager.instance;
                }
                
                connect(connectionString) {
                    this.connection = connectionString;
                    this.isConnected = true;
                    return 'Connected to database';
                }
                
                disconnect() {
                    this.connection = null;
                    this.isConnected = false;
                    return 'Disconnected from database';
                }
            }
            
            let db1 = DatabaseManager.getInstance();
            let db2 = DatabaseManager.getInstance();
            
            output += `Same instance: ${db1 === db2}\n`;
            output += db1.connect('mongodb://localhost:27017') + '\n';
            output += `DB2 connected: ${db2.isConnected}\n`;
            
            // Observer Pattern
            output += '\n=== Observer Pattern ===\n';
            class EventEmitter {
                constructor() {
                    this.events = {};
                }
                
                on(event, callback) {
                    if (!this.events[event]) {
                        this.events[event] = [];
                    }
                    this.events[event].push(callback);
                }
                
                emit(event, data) {
                    if (this.events[event]) {
                        this.events[event].forEach(callback => callback(data));
                    }
                }
                
                off(event, callback) {
                    if (this.events[event]) {
                        this.events[event] = this.events[event].filter(cb => cb !== callback);
                    }
                }
            }
            
            class User extends EventEmitter {
                constructor(name, email) {
                    super();
                    this.name = name;
                    this.email = email;
                    this.isLoggedIn = false;
                }
                
                login() {
                    this.isLoggedIn = true;
                    this.emit('login', { user: this.name, timestamp: new Date() });
                }
                
                logout() {
                    this.isLoggedIn = false;
                    this.emit('logout', { user: this.name, timestamp: new Date() });
                }
            }
            
            let user = new User('John', 'john@example.com');
            
            user.on('login', (data) => {
                output += `User ${data.user} logged in at ${data.timestamp}\n`;
            });
            
            user.on('logout', (data) => {
                output += `User ${data.user} logged out at ${data.timestamp}\n`;
            });
            
            user.login();
            user.logout();
            
            displayOutput('polymorphism-output', output);
        }
    </script>
</body>
</html>

