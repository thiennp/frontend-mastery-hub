<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 10 Mini-Project: Full-Stack React App</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Design System CSS Custom Properties */
        :root {
            --color-primary-50: #eff6ff;
            --color-primary-100: #dbeafe;
            --color-primary-200: #bfdbfe;
            --color-primary-300: #93c5fd;
            --color-primary-400: #60a5fa;
            --color-primary-500: #3b82f6;
            --color-primary-600: #2563eb;
            --color-primary-700: #1d4ed8;
            --color-primary-800: #1e40af;
            --color-primary-900: #1e3a8a;
            
            --color-gray-50: #f9fafb;
            --color-gray-100: #f3f4f6;
            --color-gray-200: #e5e7eb;
            --color-gray-300: #d1d5db;
            --color-gray-400: #9ca3af;
            --color-gray-500: #6b7280;
            --color-gray-600: #4b5563;
            --color-gray-700: #374151;
            --color-gray-800: #1f2937;
            --color-gray-900: #111827;
            
            --color-success-50: #f0fdf4;
            --color-success-100: #dcfce7;
            --color-success-500: #22c55e;
            --color-success-600: #16a34a;
            
            --color-warning-50: #fffbeb;
            --color-warning-100: #fef3c7;
            --color-warning-500: #f59e0b;
            --color-warning-600: #d97706;
            
            --color-error-50: #fef2f2;
            --color-error-100: #fee2e2;
            --color-error-500: #ef4444;
            --color-error-600: #dc2626;
            
            /* Semantic Colors */
            --color-background-primary: var(--color-gray-50);
            --color-background-secondary: #ffffff;
            --color-background-tertiary: var(--color-gray-100);
            
            --color-text-primary: var(--color-gray-900);
            --color-text-secondary: var(--color-gray-600);
            --color-text-tertiary: var(--color-gray-500);
            --color-text-inverse: #ffffff;
            
            --color-border-primary: var(--color-gray-200);
            --color-border-secondary: var(--color-gray-300);
            --color-border-focus: var(--color-primary-500);
            
            --color-interactive-primary: var(--color-primary-600);
            --color-interactive-primary-hover: var(--color-primary-700);
            
            /* Typography */
            --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-family-mono: 'Monaco', 'Consolas', 'Courier New', monospace;
            
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;
            
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            
            --line-height-tight: 1.25;
            --line-height-normal: 1.5;
            --line-height-relaxed: 1.75;
            
            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            --space-24: 6rem;
            
            /* Border Radius */
            --radius-sm: 0.125rem;
            --radius-base: 0.25rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --radius-2xl: 1rem;
            --radius-full: 9999px;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Motion */
            --motion-duration-fast: 150ms;
            --motion-duration-normal: 300ms;
            --motion-easing-ease: ease;
        }

        /* Reset and Base Styles */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            line-height: var(--line-height-normal);
        }

        body {
            font-family: var(--font-family-primary);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-normal);
            line-height: var(--line-height-normal);
            color: var(--color-text-primary);
            background-color: var(--color-background-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Layout Utilities */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-4);
        }

        .flex { display: flex; }
        .grid { display: grid; }
        .hidden { display: none; }

        .flex-col { flex-direction: column; }
        .items-start { align-items: flex-start; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }

        .gap-2 { gap: var(--space-2); }
        .gap-4 { gap: var(--space-4); }
        .gap-6 { gap: var(--space-6); }
        .gap-8 { gap: var(--space-8); }

        .p-4 { padding: var(--space-4); }
        .p-6 { padding: var(--space-6); }
        .p-8 { padding: var(--space-8); }
        .px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }
        .py-4 { padding-top: var(--space-4); padding-bottom: var(--space-4); }
        .py-8 { padding-top: var(--space-8); padding-bottom: var(--space-8); }
        .py-12 { padding-top: var(--space-12); padding-bottom: var(--space-12); }
        .py-16 { padding-top: var(--space-16); padding-bottom: var(--space-16); }

        .mb-4 { margin-bottom: var(--space-4); }
        .mb-6 { margin-bottom: var(--space-6); }
        .mb-8 { margin-bottom: var(--space-8); }

        /* Typography */
        .text-xs { font-size: var(--font-size-xs); }
        .text-sm { font-size: var(--font-size-sm); }
        .text-base { font-size: var(--font-size-base); }
        .text-lg { font-size: var(--font-size-lg); }
        .text-xl { font-size: var(--font-size-xl); }
        .text-2xl { font-size: var(--font-size-2xl); }
        .text-3xl { font-size: var(--font-size-3xl); }
        .text-4xl { font-size: var(--font-size-4xl); }

        .font-medium { font-weight: var(--font-weight-medium); }
        .font-semibold { font-weight: var(--font-weight-semibold); }
        .font-bold { font-weight: var(--font-weight-bold); }

        .text-primary { color: var(--color-text-primary); }
        .text-secondary { color: var(--color-text-secondary); }
        .text-inverse { color: var(--color-text-inverse); }

        .bg-primary { background-color: var(--color-background-primary); }
        .bg-secondary { background-color: var(--color-background-secondary); }

        .rounded { border-radius: var(--radius-base); }
        .rounded-lg { border-radius: var(--radius-lg); }
        .rounded-xl { border-radius: var(--radius-xl); }

        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow { box-shadow: var(--shadow-base); }
        .shadow-lg { box-shadow: var(--shadow-lg); }

        /* App Styles */
        .app {
            min-height: 100vh;
            background-color: var(--color-background-primary);
        }

        .app-header {
            background-color: var(--color-background-secondary);
            border-bottom: 1px solid var(--color-border-primary);
            padding: var(--space-4) 0;
            box-shadow: var(--shadow-sm);
        }

        .app-main {
            padding: var(--space-8) 0;
        }

        .app-footer {
            background-color: var(--color-background-secondary);
            border-top: 1px solid var(--color-border-primary);
            padding: var(--space-6) 0;
            margin-top: var(--space-16);
        }

        /* Navigation */
        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-brand {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary-600);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: var(--space-6);
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-link {
            color: var(--color-text-secondary);
            text-decoration: none;
            font-weight: var(--font-weight-medium);
            transition: color var(--motion-duration-fast) var(--motion-easing-ease);
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--color-primary-600);
        }

        /* Button Component */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-2) var(--space-4);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            line-height: var(--line-height-tight);
            border: 1px solid transparent;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--motion-duration-fast) var(--motion-easing-ease);
            text-decoration: none;
            user-select: none;
        }

        .btn:focus {
            outline: 2px solid var(--color-border-focus);
            outline-offset: 2px;
        }

        .btn--primary {
            background-color: var(--color-interactive-primary);
            color: var(--color-text-inverse);
        }

        .btn--primary:hover {
            background-color: var(--color-interactive-primary-hover);
        }

        .btn--secondary {
            background-color: var(--color-background-secondary);
            color: var(--color-text-primary);
            border-color: var(--color-border-primary);
        }

        .btn--danger {
            background-color: var(--color-error-500);
            color: var(--color-text-inverse);
        }

        .btn--danger:hover {
            background-color: var(--color-error-600);
        }

        /* Card Component */
        .card {
            background-color: var(--color-background-secondary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            transition: all var(--motion-duration-fast) var(--motion-easing-ease);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .card__header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--color-border-primary);
            background-color: var(--color-background-tertiary);
        }

        .card__title {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
            margin: 0;
        }

        .card__subtitle {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-top: var(--space-1);
        }

        .card__body {
            padding: var(--space-6);
        }

        .card__footer {
            padding: var(--space-6);
            border-top: 1px solid var(--color-border-primary);
            background-color: var(--color-background-tertiary);
        }

        /* Form Components */
        .form-group {
            margin-bottom: var(--space-4);
        }

        .form-label {
            display: block;
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            color: var(--color-text-primary);
            margin-bottom: var(--space-2);
        }

        .form-input {
            width: 100%;
            padding: var(--space-2) var(--space-3);
            font-size: var(--font-size-sm);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-md);
            background-color: var(--color-background-secondary);
            color: var(--color-text-primary);
            transition: border-color var(--motion-duration-fast) var(--motion-easing-ease);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--color-border-focus);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Badge Component */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: var(--space-1) var(--space-2);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            border-radius: var(--radius-full);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .badge--primary {
            background-color: var(--color-primary-100);
            color: var(--color-primary-800);
        }

        .badge--success {
            background-color: var(--color-success-100);
            color: var(--color-success-600);
        }

        .badge--warning {
            background-color: var(--color-warning-100);
            color: var(--color-warning-600);
        }

        .badge--error {
            background-color: var(--color-error-100);
            color: var(--color-error-600);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--color-border-primary);
            border-radius: 50%;
            border-top-color: var(--color-primary-500);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Alert Component */
        .alert {
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-4);
        }

        .alert--success {
            background-color: var(--color-success-50);
            border: 1px solid var(--color-success-200);
            color: var(--color-success-800);
        }

        .alert--error {
            background-color: var(--color-error-50);
            border: 1px solid var(--color-error-200);
            color: var(--color-error-800);
        }

        .alert--warning {
            background-color: var(--color-warning-50);
            border: 1px solid var(--color-warning-200);
            color: var(--color-warning-800);
        }

        /* Task List */
        .task-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: var(--space-4);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-2);
            background-color: var(--color-background-secondary);
            transition: all var(--motion-duration-fast) var(--motion-easing-ease);
        }

        .task-item:hover {
            background-color: var(--color-background-tertiary);
        }

        .task-item.completed {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .task-checkbox {
            margin-right: var(--space-3);
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            font-weight: var(--font-weight-medium);
            color: var(--color-text-primary);
            margin-bottom: var(--space-1);
        }

        .task-description {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .task-actions {
            display: flex;
            gap: var(--space-2);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .stat-card {
            background-color: var(--color-background-secondary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            text-align: center;
            box-shadow: var(--shadow-sm);
        }

        .stat-value {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary-600);
            margin-bottom: var(--space-2);
        }

        .stat-label {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0 var(--space-3);
            }
            
            .nav {
                flex-direction: column;
                gap: var(--space-4);
            }
            
            .nav-links {
                gap: var(--space-4);
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }

        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            :root {
                --color-background-primary: var(--color-gray-900);
                --color-background-secondary: var(--color-gray-800);
                --color-background-tertiary: var(--color-gray-700);
                --color-text-primary: var(--color-gray-100);
                --color-text-secondary: var(--color-gray-300);
                --color-text-tertiary: var(--color-gray-400);
                --color-border-primary: var(--color-gray-700);
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <div id="react-app">
            <!-- React app will be rendered here -->
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo, useRef, memo, createContext, useContext } = React;

        // Context for global state
        const AppContext = createContext();

        // Custom hooks
        function useLocalStorage(key, initialValue) {
            const [storedValue, setStoredValue] = useState(() => {
                try {
                    const item = window.localStorage.getItem(key);
                    return item ? JSON.parse(item) : initialValue;
                } catch (error) {
                    return initialValue;
                }
            });

            const setValue = (value) => {
                try {
                    setStoredValue(value);
                    window.localStorage.setItem(key, JSON.stringify(value));
                } catch (error) {
                    console.error(error);
                }
            };

            return [storedValue, setValue];
        }

        function useDebounce(value, delay) {
            const [debouncedValue, setDebouncedValue] = useState(value);

            useEffect(() => {
                const handler = setTimeout(() => {
                    setDebouncedValue(value);
                }, delay);

                return () => {
                    clearTimeout(handler);
                };
            }, [value, delay]);

            return debouncedValue;
        }

        // Mock API functions
        const mockAPI = {
            async getTasks() {
                await new Promise(resolve => setTimeout(resolve, 500));
                return JSON.parse(localStorage.getItem('tasks') || '[]');
            },
            
            async saveTasks(tasks) {
                await new Promise(resolve => setTimeout(resolve, 300));
                localStorage.setItem('tasks', JSON.stringify(tasks));
                return tasks;
            },
            
            async addTask(task) {
                const tasks = await this.getTasks();
                const newTask = {
                    id: Date.now(),
                    ...task,
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                const updatedTasks = [...tasks, newTask];
                await this.saveTasks(updatedTasks);
                return newTask;
            },
            
            async updateTask(id, updates) {
                const tasks = await this.getTasks();
                const updatedTasks = tasks.map(task => 
                    task.id === id ? { ...task, ...updates } : task
                );
                await this.saveTasks(updatedTasks);
                return updatedTasks.find(task => task.id === id);
            },
            
            async deleteTask(id) {
                const tasks = await this.getTasks();
                const updatedTasks = tasks.filter(task => task.id !== id);
                await this.saveTasks(updatedTasks);
                return true;
            }
        };

        // Components
        const LoadingSpinner = memo(() => (
            <div className="spinner" />
        ));

        const Alert = memo(({ type, message, onClose }) => (
            <div className={`alert alert--${type}`}>
                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                    <span>{message}</span>
                    {onClose && (
                        <button 
                            onClick={onClose}
                            style={{ 
                                background: 'none', 
                                border: 'none', 
                                fontSize: '1.2rem', 
                                cursor: 'pointer' 
                            }}
                        >
                            ×
                        </button>
                    )}
                </div>
            </div>
        ));

        const TaskItem = memo(({ task, onToggle, onEdit, onDelete }) => (
            <div className={`task-item ${task.completed ? 'completed' : ''}`}>
                <input
                    type="checkbox"
                    className="task-checkbox"
                    checked={task.completed}
                    onChange={() => onToggle(task.id)}
                />
                <div className="task-content">
                    <div className="task-title">{task.title}</div>
                    {task.description && (
                        <div className="task-description">{task.description}</div>
                    )}
                </div>
                <div className="task-actions">
                    <button 
                        className="btn btn--secondary"
                        onClick={() => onEdit(task)}
                        style={{ padding: '0.25rem 0.5rem', fontSize: '0.75rem' }}
                    >
                        Edit
                    </button>
                    <button 
                        className="btn btn--danger"
                        onClick={() => onDelete(task.id)}
                        style={{ padding: '0.25rem 0.5rem', fontSize: '0.75rem' }}
                    >
                        Delete
                    </button>
                </div>
            </div>
        ));

        const TaskForm = memo(({ task, onSubmit, onCancel, isLoading }) => {
            const [formData, setFormData] = useState({
                title: task?.title || '',
                description: task?.description || '',
                priority: task?.priority || 'medium'
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (formData.title.trim()) {
                    onSubmit(formData);
                }
            };

            const handleChange = (e) => {
                setFormData(prev => ({
                    ...prev,
                    [e.target.name]: e.target.value
                }));
            };

            return (
                <form onSubmit={handleSubmit} style={{ marginBottom: '1rem' }}>
                    <div className="form-group">
                        <label className="form-label" htmlFor="title">Title *</label>
                        <input
                            type="text"
                            id="title"
                            name="title"
                            className="form-input"
                            value={formData.title}
                            onChange={handleChange}
                            required
                        />
                    </div>
                    <div className="form-group">
                        <label className="form-label" htmlFor="description">Description</label>
                        <textarea
                            id="description"
                            name="description"
                            className="form-input form-textarea"
                            value={formData.description}
                            onChange={handleChange}
                        />
                    </div>
                    <div className="form-group">
                        <label className="form-label" htmlFor="priority">Priority</label>
                        <select
                            id="priority"
                            name="priority"
                            className="form-input"
                            value={formData.priority}
                            onChange={handleChange}
                        >
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div style={{ display: 'flex', gap: '0.5rem' }}>
                        <button 
                            type="submit" 
                            className="btn btn--primary"
                            disabled={isLoading}
                        >
                            {isLoading ? <LoadingSpinner /> : (task ? 'Update' : 'Add')} Task
                        </button>
                        <button 
                            type="button" 
                            className="btn btn--secondary"
                            onClick={onCancel}
                        >
                            Cancel
                        </button>
                    </div>
                </form>
            );
        });

        const TaskList = memo(({ tasks, onToggle, onEdit, onDelete }) => {
            if (tasks.length === 0) {
                return (
                    <div style={{ textAlign: 'center', padding: '2rem', color: 'var(--color-text-secondary)' }}>
                        No tasks yet. Add one above to get started!
                    </div>
                );
            }

            return (
                <ul className="task-list">
                    {tasks.map(task => (
                        <TaskItem
                            key={task.id}
                            task={task}
                            onToggle={onToggle}
                            onEdit={onEdit}
                            onDelete={onDelete}
                        />
                    ))}
                </ul>
            );
        });

        const Stats = memo(({ tasks }) => {
            const stats = useMemo(() => {
                const total = tasks.length;
                const completed = tasks.filter(task => task.completed).length;
                const pending = total - completed;
                const highPriority = tasks.filter(task => task.priority === 'high').length;

                return { total, completed, pending, highPriority };
            }, [tasks]);

            return (
                <div className="stats-grid">
                    <div className="stat-card">
                        <div className="stat-value">{stats.total}</div>
                        <div className="stat-label">Total Tasks</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">{stats.completed}</div>
                        <div className="stat-label">Completed</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">{stats.pending}</div>
                        <div className="stat-label">Pending</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-value">{stats.highPriority}</div>
                        <div className="stat-label">High Priority</div>
                    </div>
                </div>
            );
        });

        const Header = memo(() => {
            const { user, logout } = useContext(AppContext);

            return (
                <header className="app-header">
                    <div className="container">
                        <nav className="nav">
                            <a href="#" className="nav-brand">
                                📝 TaskMaster Pro
                            </a>
                            <ul className="nav-links">
                                <li><a href="#" className="nav-link active">Dashboard</a></li>
                                <li><a href="#" className="nav-link">Projects</a></li>
                                <li><a href="#" className="nav-link">Settings</a></li>
                                <li>
                                    <button className="btn btn--secondary" onClick={logout}>
                                        Logout ({user?.name})
                                    </button>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </header>
            );
        });

        const Footer = memo(() => (
            <footer className="app-footer">
                <div className="container">
                    <div style={{ textAlign: 'center', color: 'var(--color-text-secondary)' }}>
                        <p>&copy; 2024 TaskMaster Pro. Built with React and modern web technologies.</p>
                        <p style={{ fontSize: '0.875rem', marginTop: '0.5rem' }}>
                            Level 10 Mini-Project: Full-Stack React Application
                        </p>
                    </div>
                </div>
            </footer>
        ));

        const Dashboard = memo(() => {
            const { tasks, setTasks, addTask, updateTask, deleteTask } = useContext(AppContext);
            const [isLoading, setIsLoading] = useState(false);
            const [editingTask, setEditingTask] = useState(null);
            const [alert, setAlert] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [filter, setFilter] = useState('all');
            
            const debouncedSearchTerm = useDebounce(searchTerm, 300);

            const filteredTasks = useMemo(() => {
                return tasks.filter(task => {
                    const matchesSearch = task.title.toLowerCase().includes(debouncedSearchTerm.toLowerCase()) ||
                                        task.description.toLowerCase().includes(debouncedSearchTerm.toLowerCase());
                    
                    if (filter === 'completed') return matchesSearch && task.completed;
                    if (filter === 'pending') return matchesSearch && !task.completed;
                    if (filter === 'high') return matchesSearch && task.priority === 'high';
                    
                    return matchesSearch;
                });
            }, [tasks, debouncedSearchTerm, filter]);

            const handleAddTask = async (taskData) => {
                setIsLoading(true);
                try {
                    const newTask = await mockAPI.addTask(taskData);
                    setTasks(prev => [...prev, newTask]);
                    setAlert({ type: 'success', message: 'Task added successfully!' });
                    setTimeout(() => setAlert(null), 3000);
                } catch (error) {
                    setAlert({ type: 'error', message: 'Failed to add task' });
                } finally {
                    setIsLoading(false);
                }
            };

            const handleUpdateTask = async (taskData) => {
                setIsLoading(true);
                try {
                    const updatedTask = await mockAPI.updateTask(editingTask.id, taskData);
                    setTasks(prev => prev.map(task => task.id === editingTask.id ? updatedTask : task));
                    setEditingTask(null);
                    setAlert({ type: 'success', message: 'Task updated successfully!' });
                    setTimeout(() => setAlert(null), 3000);
                } catch (error) {
                    setAlert({ type: 'error', message: 'Failed to update task' });
                } finally {
                    setIsLoading(false);
                }
            };

            const handleToggleTask = async (id) => {
                const task = tasks.find(t => t.id === id);
                if (task) {
                    await mockAPI.updateTask(id, { completed: !task.completed });
                    setTasks(prev => prev.map(t => t.id === id ? { ...t, completed: !t.completed } : t));
                }
            };

            const handleDeleteTask = async (id) => {
                if (window.confirm('Are you sure you want to delete this task?')) {
                    await mockAPI.deleteTask(id);
                    setTasks(prev => prev.filter(t => t.id !== id));
                    setAlert({ type: 'success', message: 'Task deleted successfully!' });
                    setTimeout(() => setAlert(null), 3000);
                }
            };

            const handleEditTask = (task) => {
                setEditingTask(task);
            };

            const handleCancelEdit = () => {
                setEditingTask(null);
            };

            return (
                <div className="app-main">
                    <div className="container">
                        <h1 style={{ marginBottom: '2rem', color: 'var(--color-text-primary)' }}>
                            Task Dashboard
                        </h1>

                        {alert && (
                            <Alert 
                                type={alert.type} 
                                message={alert.message} 
                                onClose={() => setAlert(null)} 
                            />
                        )}

                        <Stats tasks={tasks} />

                        <div className="card">
                            <div className="card__header">
                                <h2 className="card__title">
                                    {editingTask ? 'Edit Task' : 'Add New Task'}
                                </h2>
                            </div>
                            <div className="card__body">
                                <TaskForm
                                    task={editingTask}
                                    onSubmit={editingTask ? handleUpdateTask : handleAddTask}
                                    onCancel={handleCancelEdit}
                                    isLoading={isLoading}
                                />
                            </div>
                        </div>

                        <div className="card">
                            <div className="card__header">
                                <h2 className="card__title">Tasks</h2>
                                <div style={{ display: 'flex', gap: '1rem', marginTop: '1rem' }}>
                                    <input
                                        type="text"
                                        placeholder="Search tasks..."
                                        className="form-input"
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        style={{ flex: 1 }}
                                    />
                                    <select
                                        className="form-input"
                                        value={filter}
                                        onChange={(e) => setFilter(e.target.value)}
                                        style={{ width: 'auto' }}
                                    >
                                        <option value="all">All Tasks</option>
                                        <option value="pending">Pending</option>
                                        <option value="completed">Completed</option>
                                        <option value="high">High Priority</option>
                                    </select>
                                </div>
                            </div>
                            <div className="card__body">
                                <TaskList
                                    tasks={filteredTasks}
                                    onToggle={handleToggleTask}
                                    onEdit={handleEditTask}
                                    onDelete={handleDeleteTask}
                                />
                            </div>
                        </div>
                    </div>
                </div>
            );
        });

        const App = () => {
            const [user, setUser] = useState(null);
            const [tasks, setTasks] = useState([]);
            const [isLoading, setIsLoading] = useState(true);

            const loadTasks = useCallback(async () => {
                try {
                    const tasksData = await mockAPI.getTasks();
                    setTasks(tasksData);
                } catch (error) {
                    console.error('Failed to load tasks:', error);
                } finally {
                    setIsLoading(false);
                }
            }, []);

            const addTask = useCallback(async (taskData) => {
                const newTask = await mockAPI.addTask(taskData);
                setTasks(prev => [...prev, newTask]);
                return newTask;
            }, []);

            const updateTask = useCallback(async (id, updates) => {
                const updatedTask = await mockAPI.updateTask(id, updates);
                setTasks(prev => prev.map(task => task.id === id ? updatedTask : task));
                return updatedTask;
            }, []);

            const deleteTask = useCallback(async (id) => {
                await mockAPI.deleteTask(id);
                setTasks(prev => prev.filter(task => task.id !== id));
            }, []);

            const logout = useCallback(() => {
                setUser(null);
                setTasks([]);
            }, []);

            useEffect(() => {
                // Simulate user login
                setUser({ name: 'John Doe', email: 'john@example.com' });
                loadTasks();
            }, [loadTasks]);

            const contextValue = {
                user,
                tasks,
                setTasks,
                addTask,
                updateTask,
                deleteTask,
                logout
            };

            if (isLoading) {
                return (
                    <div style={{ 
                        display: 'flex', 
                        justifyContent: 'center', 
                        alignItems: 'center', 
                        height: '100vh' 
                    }}>
                        <LoadingSpinner />
                    </div>
                );
            }

            return (
                <AppContext.Provider value={contextValue}>
                    <div className="app">
                        <Header />
                        <Dashboard />
                        <Footer />
                    </div>
                </AppContext.Provider>
            );
        };

        // Render the app
        ReactDOM.render(<App />, document.getElementById('react-app'));
    </script>
</body>
</html>
