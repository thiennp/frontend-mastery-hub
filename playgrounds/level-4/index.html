<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 4: Advanced React - Frontend Mastery Hub</title>
    <link rel="stylesheet" href="level4-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <a href="../../index.html" style="text-decoration: none; color: inherit;">
                    <h1>üéØ Frontend Mastery Hub</h1>
                </a>
                <p>Level 4: Advanced React</p>
            </div>
            <nav class="nav">
                <a href="../../index.html" class="nav-link">‚Üê Back to Hub</a>
                <a href="#exercises" class="nav-link">Exercises</a>
                <a href="#resources" class="nav-link">Resources</a>
            </nav>
        </div>
    </header>

    <main class="main">
        <section class="level-hero">
            <div class="container">
                <div class="level-info">
                    <div class="level-badge">Level 4</div>
                    <h1>Advanced React</h1>
                    <p>Master advanced React patterns, state management, routing, and optimization techniques.</p>
                    <div class="level-stats">
                        <div class="stat">
                            <span class="stat-number">18</span>
                            <span class="stat-label">Exercises</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">5-6</span>
                            <span class="stat-label">Hours</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">Advanced</span>
                            <span class="stat-label">Level</span>
                        </div>
                    </div>
                </div>
                <div class="level-progress">
                    <h3>Your Progress</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="level-progress" style="width: 0%"></div>
                    </div>
                    <span class="progress-text" id="progress-text">0% Complete</span>
                </div>
            </div>
        </section>

        <section id="exercises" class="exercises-section">
            <div class="container">
                <h2>Advanced Exercises</h2>
                <p>Master complex React patterns and build production-ready applications</p>
                
                <div class="exercises-grid">
                    <!-- Exercise 1: Custom Hooks -->
                    <div class="exercise-card" data-exercise="1">
                        <div class="exercise-header">
                            <div class="exercise-number">1</div>
                            <h3>Custom Hooks</h3>
                            <div class="exercise-status in-progress">Ready</div>
                        </div>
                        <div class="exercise-content">
                            <p>Create reusable custom hooks to extract component logic and share stateful logic.</p>
                            <div class="exercise-editor">
                                <div class="editor-tabs">
                                    <button class="tab active" data-tab="jsx">JSX</button>
                                    <button class="tab" data-tab="preview">Preview</button>
                                </div>
                                <div class="editor-content">
                                    <textarea class="code-editor" data-language="jsx" placeholder="Write your React JSX here...">const { useState, useEffect } = React;

// Custom hook for API data fetching
function useApi(url) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetch(url)
      .then(response => response.json())
      .then(data => {
        setData(data);
        setLoading(false);
      })
      .catch(error => {
        setError(error);
        setLoading(false);
      });
  }, [url]);

  return { data, loading, error };
}

// Custom hook for local storage
function useLocalStorage(key, initialValue) {
  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key);
      return item ? JSON.parse(item) : initialValue;
    } catch (error) {
      return initialValue;
    }
  });

  const setValue = (value) => {
    try {
      setStoredValue(value);
      window.localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error(error);
    }
  };

  return [storedValue, setValue];
}

// Component using custom hooks
function UserProfile() {
  const [name, setName] = useLocalStorage('userName', '');
  const { data: user, loading, error } = useApi('https://jsonplaceholder.typicode.com/users/1');

  return (
    <div>
      <h2>User Profile</h2>
      <input 
        value={name}
        onChange={(e) => setName(e.target.value)}
        placeholder="Enter your name"
      />
      <p>Stored name: {name}</p>
      
      {loading && <p>Loading user data...</p>}
      {error && <p>Error: {error.message}</p>}
      {user && <p>API User: {user.name}</p>}
    </div>
  );
}

ReactDOM.render(<UserProfile />, document.getElementById('root'));</textarea>
                                    <div class="preview-frame" style="display: none;">
                                        <div id="preview-root-1"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="exercise-hints">
                                <h4>üí° Hints:</h4>
                                <ul>
                                    <li>Custom hooks start with "use" prefix</li>
                                    <li>Can use other hooks inside custom hooks</li>
                                    <li>Return values that components can use</li>
                                    <li>Great for sharing logic between components</li>
                                </ul>
                            </div>
                            <button class="check-button" onclick="checkExercise(1)">Check Answer</button>
                        </div>
                    </div>

                    <!-- Exercise 2: Context API -->
                    <div class="exercise-card locked" data-exercise="2">
                        <div class="exercise-header">
                            <div class="exercise-number">2</div>
                            <h3>Context API</h3>
                            <div class="exercise-status locked">Locked</div>
                        </div>
                        <div class="exercise-content">
                            <p>Use React Context to share data across component trees without prop drilling.</p>
                            <div class="exercise-editor">
                                <div class="editor-tabs">
                                    <button class="tab active" data-tab="jsx">JSX</button>
                                    <button class="tab" data-tab="preview">Preview</button>
                                </div>
                                <div class="editor-content">
                                    <textarea class="code-editor" data-language="jsx" placeholder="Write your React JSX here...">const { createContext, useContext, useState } = React;

// Create context
const ThemeContext = createContext();

// Context provider component
function ThemeProvider({ children }) {
  const [theme, setTheme] = useState('light');
  
  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
}

// Custom hook to use context
function useTheme() {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider');
  }
  return context;
}

// Component using context
function Header() {
  const { theme, toggleTheme } = useTheme();
  
  return (
    <header style={{ 
      background: theme === 'light' ? '#fff' : '#333',
      color: theme === 'light' ? '#333' : '#fff',
      padding: '1rem'
    }}>
      <h1>My App</h1>
      <button onClick={toggleTheme}>
        Switch to {theme === 'light' ? 'dark' : 'light'} theme
      </button>
    </header>
  );
}

function Main() {
  const { theme } = useTheme();
  
  return (
    <main style={{ 
      background: theme === 'light' ? '#f5f5f5' : '#222',
      color: theme === 'light' ? '#333' : '#fff',
      padding: '2rem'
    }}>
      <p>Current theme: {theme}</p>
    </main>
  );
}

function App() {
  return (
    <ThemeProvider>
      <Header />
      <Main />
    </ThemeProvider>
  );
}

ReactDOM.render(<App />, document.getElementById('root'));</textarea>
                                    <div class="preview-frame" style="display: none;">
                                        <div id="preview-root-2"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="exercise-hints">
                                <h4>üí° Hints:</h4>
                                <ul>
                                    <li>Use <code>createContext()</code> to create context</li>
                                    <li>Wrap components with <code>Context.Provider</code></li>
                                    <li>Use <code>useContext()</code> to consume context</li>
                                    <li>Create custom hooks for context usage</li>
                                </ul>
                            </div>
                            <button class="check-button" onclick="checkExercise(2)">Check Answer</button>
                        </div>
                    </div>

                    <!-- Exercise 3: useReducer -->
                    <div class="exercise-card locked" data-exercise="3">
                        <div class="exercise-header">
                            <div class="exercise-number">3</div>
                            <h3>useReducer Hook</h3>
                            <div class="exercise-status locked">Locked</div>
                        </div>
                        <div class="exercise-content">
                            <p>Manage complex state logic with useReducer for predictable state updates.</p>
                            <div class="exercise-editor">
                                <div class="editor-tabs">
                                    <button class="tab active" data-tab="jsx">JSX</button>
                                    <button class="tab" data-tab="preview">Preview</button>
                                </div>
                                <div class="editor-content">
                                    <textarea class="code-editor" data-language="jsx" placeholder="Write your React JSX here...">const { useReducer } = React;

// Reducer function
function todoReducer(state, action) {
  switch (action.type) {
    case 'ADD_TODO':
      return [...state, {
        id: Date.now(),
        text: action.payload,
        completed: false
      }];
    case 'TOGGLE_TODO':
      return state.map(todo =>
        todo.id === action.payload
          ? { ...todo, completed: !todo.completed }
          : todo
      );
    case 'DELETE_TODO':
      return state.filter(todo => todo.id !== action.payload);
    case 'CLEAR_COMPLETED':
      return state.filter(todo => !todo.completed);
    default:
      return state;
  }
}

function TodoApp() {
  const [todos, dispatch] = useReducer(todoReducer, []);
  const [inputValue, setInputValue] = React.useState('');

  const addTodo = () => {
    if (inputValue.trim()) {
      dispatch({ type: 'ADD_TODO', payload: inputValue });
      setInputValue('');
    }
  };

  const toggleTodo = (id) => {
    dispatch({ type: 'TOGGLE_TODO', payload: id });
  };

  const deleteTodo = (id) => {
    dispatch({ type: 'DELETE_TODO', payload: id });
  };

  const clearCompleted = () => {
    dispatch({ type: 'CLEAR_COMPLETED' });
  };

  return (
    <div>
      <h2>Todo App with useReducer</h2>
      <div>
        <input
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          placeholder="Add a todo..."
        />
        <button onClick={addTodo}>Add</button>
        <button onClick={clearCompleted}>Clear Completed</button>
      </div>
      <ul>
        {todos.map(todo => (
          <li key={todo.id} style={{
            textDecoration: todo.completed ? 'line-through' : 'none'
          }}>
            <span onClick={() => toggleTodo(todo.id)}>
              {todo.text}
            </span>
            <button onClick={() => deleteTodo(todo.id)}>Delete</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

ReactDOM.render(<TodoApp />, document.getElementById('root'));</textarea>
                                    <div class="preview-frame" style="display: none;">
                                        <div id="preview-root-3"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="exercise-hints">
                                <h4>üí° Hints:</h4>
                                <ul>
                                    <li>useReducer takes (reducer, initialState)</li>
                                    <li>Reducer function: (state, action) => newState</li>
                                    <li>Dispatch actions with type and payload</li>
                                    <li>Better for complex state logic than useState</li>
                                </ul>
                            </div>
                            <button class="check-button" onclick="checkExercise(3)">Check Answer</button>
                        </div>
                    </div>

                    <!-- Exercise 4: useMemo and useCallback -->
                    <div class="exercise-card locked" data-exercise="4">
                        <div class="exercise-header">
                            <div class="exercise-number">4</div>
                            <h3>Performance Optimization</h3>
                            <div class="exercise-status locked">Locked</div>
                        </div>
                        <div class="exercise-content">
                            <p>Optimize React performance with useMemo and useCallback hooks.</p>
                            <div class="exercise-editor">
                                <div class="editor-tabs">
                                    <button class="tab active" data-tab="jsx">JSX</button>
                                    <button class="tab" data-tab="preview">Preview</button>
                                </div>
                                <div class="editor-content">
                                    <textarea class="code-editor" data-language="jsx" placeholder="Write your React JSX here...">const { useState, useMemo, useCallback, memo } = React;

// Expensive calculation function
function expensiveCalculation(numbers) {
  console.log('Calculating...');
  return numbers.reduce((sum, num) => sum + num, 0);
}

// Memoized child component
const ExpensiveChild = memo(function ExpensiveChild({ numbers, onIncrement }) {
  const sum = useMemo(() => expensiveCalculation(numbers), [numbers]);
  
  return (
    <div>
      <h3>Sum: {sum}</h3>
      <button onClick={onIncrement}>Increment</button>
    </div>
  );
});

function PerformanceApp() {
  const [count, setCount] = useState(0);
  const [numbers, setNumbers] = useState([1, 2, 3, 4, 5]);

  // Memoized expensive calculation
  const expensiveValue = useMemo(() => {
    return expensiveCalculation(numbers);
  }, [numbers]);

  // Memoized callback function
  const handleIncrement = useCallback(() => {
    setCount(prev => prev + 1);
  }, []);

  // Memoized callback with dependency
  const handleAddNumber = useCallback(() => {
    setNumbers(prev => [...prev, Math.floor(Math.random() * 10)]);
  }, []);

  return (
    <div>
      <h2>Performance Optimization Demo</h2>
      <p>Count: {count}</p>
      <p>Expensive Value: {expensiveValue}</p>
      
      <button onClick={handleIncrement}>Increment Count</button>
      <button onClick={handleAddNumber}>Add Random Number</button>
      
      <ExpensiveChild numbers={numbers} onIncrement={handleIncrement} />
    </div>
  );
}

ReactDOM.render(<PerformanceApp />, document.getElementById('root'));</textarea>
                                    <div class="preview-frame" style="display: none;">
                                        <div id="preview-root-4"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="exercise-hints">
                                <h4>üí° Hints:</h4>
                                <ul>
                                    <li>useMemo: memoize expensive calculations</li>
                                    <li>useCallback: memoize callback functions</li>
                                    <li>React.memo: memoize component renders</li>
                                    <li>Include dependencies in dependency arrays</li>
                                </ul>
                            </div>
                            <button class="check-button" onclick="checkExercise(4)">Check Answer</button>
                        </div>
                    </div>

                    <!-- Exercise 5: Error Boundaries -->
                    <div class="exercise-card locked" data-exercise="5">
                        <div class="exercise-header">
                            <div class="exercise-number">5</div>
                            <h3>Error Boundaries</h3>
                            <div class="exercise-status locked">Locked</div>
                        </div>
                        <div class="exercise-content">
                            <p>Implement error boundaries to catch and handle JavaScript errors in React components.</p>
                            <div class="exercise-editor">
                                <div class="editor-tabs">
                                    <button class="tab active" data-tab="jsx">JSX</button>
                                    <button class="tab" data-tab="preview">Preview</button>
                                </div>
                                <div class="editor-content">
                                    <textarea class="code-editor" data-language="jsx" placeholder="Write your React JSX here...">const { Component, useState } = React;

// Error Boundary Class Component
class ErrorBoundary extends Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  componentDidCatch(error, errorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return (
        <div style={{ 
          padding: '1rem', 
          border: '2px solid red', 
          borderRadius: '4px',
          background: '#ffe6e6'
        }}>
          <h2>Something went wrong!</h2>
          <p>Error: {this.state.error?.message}</p>
          <button onClick={() => this.setState({ hasError: false, error: null })}>
            Try Again
          </button>
        </div>
      );
    }

    return this.props.children;
  }
}

// Component that might throw an error
function BuggyComponent({ shouldThrow }) {
  if (shouldThrow) {
    throw new Error('This is a test error!');
  }
  
  return <div>This component works fine!</div>;
}

// Main app with error boundary
function ErrorBoundaryApp() {
  const [shouldThrow, setShouldThrow] = useState(false);

  return (
    <div>
      <h2>Error Boundary Demo</h2>
      <button onClick={() => setShouldThrow(!shouldThrow)}>
        {shouldThrow ? 'Fix Component' : 'Break Component'}
      </button>
      
      <ErrorBoundary>
        <BuggyComponent shouldThrow={shouldThrow} />
      </ErrorBoundary>
    </div>
  );
}

ReactDOM.render(<ErrorBoundaryApp />, document.getElementById('root'));</textarea>
                                    <div class="preview-frame" style="display: none;">
                                        <div id="preview-root-5"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="exercise-hints">
                                <h4>üí° Hints:</h4>
                                <ul>
                                    <li>Error boundaries must be class components</li>
                                    <li>Use <code>getDerivedStateFromError</code> to update state</li>
                                    <li>Use <code>componentDidCatch</code> for side effects</li>
                                    <li>Wrap components that might throw errors</li>
                                </ul>
                            </div>
                            <button class="check-button" onclick="checkExercise(5)">Check Answer</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="resources" class="resources-section">
            <div class="container">
                <h2>Advanced Resources</h2>
                <div class="resources-grid">
                    <div class="resource-card">
                        <h3>üìö React Advanced Patterns</h3>
                        <p>Advanced React patterns and techniques</p>
                        <a href="https://reactpatterns.com/" target="_blank" class="resource-link">View Patterns</a>
                    </div>
                    <div class="resource-card">
                        <h3>üéØ React Performance</h3>
                        <p>Optimizing React applications for performance</p>
                        <a href="https://react.dev/learn/render-and-commit" target="_blank" class="resource-link">Learn More</a>
                    </div>
                    <div class="resource-card">
                        <h3>üí° State Management</h3>
                        <p>Advanced state management with Redux and Zustand</p>
                        <a href="https://redux.js.org/" target="_blank" class="resource-link">Redux Guide</a>
                    </div>
                    <div class="resource-card">
                        <h3>üöÄ React Testing</h3>
                        <p>Testing React applications with Jest and RTL</p>
                        <a href="https://testing-library.com/docs/react-testing-library/intro/" target="_blank" class="resource-link">Testing Guide</a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Frontend Mastery Hub. Keep coding! üöÄ</p>
        </div>
    </footer>

    <script src="level4-script.js"></script>
</body>
</html>
