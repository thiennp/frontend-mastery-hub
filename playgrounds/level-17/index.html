<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 17: DevOps & Deployment - Frontend Mastery Hub</title>
    <link rel="stylesheet" href="level17-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
</head>
<body>
    <div class="level-container">
        <header class="level-header">
            <div class="level-info">
                <h1>üöÄ Level 17: DevOps & Deployment</h1>
                <p class="level-description">Master containerization, CI/CD pipelines, cloud deployment, and monitoring</p>
                <div class="level-stats">
                    <span class="stat">5 Exercises</span>
                    <span class="stat">DevOps Focus</span>
                    <span class="stat">Production Ready</span>
                </div>
            </div>
            <div class="level-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">0/5 Complete</span>
            </div>
        </header>

        <div class="exercises-container">
            <!-- Exercise 1: Docker Containerization -->
            <div class="exercise" id="exercise1">
                <div class="exercise-header">
                    <h3>üê≥ Exercise 1: Docker Containerization</h3>
                    <p>Create a Dockerfile for a Node.js application with multi-stage build</p>
                </div>
                <div class="exercise-content">
                    <div class="code-editor">
                        <div class="editor-header">
                            <span>Dockerfile</span>
                            <button class="run-btn" onclick="runExercise(1)">Run & Validate</button>
                        </div>
                        <textarea id="code1" placeholder="Write your Dockerfile here..."># Multi-stage Dockerfile for Node.js app
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM node:18-alpine AS runtime
WORKDIR /app
COPY --from=builder /app/node_modules ./node_modules
COPY . .

EXPOSE 3000
CMD ["npm", "start"]</textarea>
                    </div>
                    <div class="exercise-hints">
                        <h4>üí° Hints:</h4>
                        <ul>
                            <li>Use multi-stage builds to reduce image size</li>
                            <li>Copy package.json first for better layer caching</li>
                            <li>Use Alpine Linux for smaller base images</li>
                            <li>Set proper working directory and expose ports</li>
                        </ul>
                    </div>
                    <div class="exercise-result" id="result1"></div>
                </div>
            </div>

            <!-- Exercise 2: CI/CD Pipeline -->
            <div class="exercise" id="exercise2">
                <div class="exercise-header">
                    <h3>üîÑ Exercise 2: CI/CD Pipeline</h3>
                    <p>Create a GitHub Actions workflow for automated testing and deployment</p>
                </div>
                <div class="exercise-content">
                    <div class="code-editor">
                        <div class="editor-header">
                            <span>.github/workflows/deploy.yml</span>
                            <button class="run-btn" onclick="runExercise(2)">Run & Validate</button>
                        </div>
                        <textarea id="code2" placeholder="Write your GitHub Actions workflow here...">name: CI/CD Pipeline

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm test
      - run: npm run build

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to production
        run: echo "Deploying to production..."</textarea>
                    </div>
                    <div class="exercise-hints">
                        <h4>üí° Hints:</h4>
                        <ul>
                            <li>Use matrix strategy for multiple Node.js versions</li>
                            <li>Add caching for node_modules</li>
                            <li>Include security scanning steps</li>
                            <li>Use environment variables for secrets</li>
                        </ul>
                    </div>
                    <div class="exercise-result" id="result2"></div>
                </div>
            </div>

            <!-- Exercise 3: Cloud Deployment -->
            <div class="exercise" id="exercise3">
                <div class="exercise-header">
                    <h3>‚òÅÔ∏è Exercise 3: Cloud Deployment</h3>
                    <p>Create a Kubernetes deployment configuration for scalable application</p>
                </div>
                <div class="exercise-content">
                    <div class="code-editor">
                        <div class="editor-header">
                            <span>k8s-deployment.yaml</span>
                            <button class="run-btn" onclick="runExercise(3)">Run & Validate</button>
                        </div>
                        <textarea id="code3" placeholder="Write your Kubernetes deployment here...">apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend-app
  labels:
    app: frontend-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: frontend-app
  template:
    metadata:
      labels:
        app: frontend-app
    spec:
      containers:
      - name: frontend
        image: myapp:latest
        ports:
        - containerPort: 3000
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
---
apiVersion: v1
kind: Service
metadata:
  name: frontend-service
spec:
  selector:
    app: frontend-app
  ports:
    - protocol: TCP
      port: 80
      targetPort: 3000
  type: LoadBalancer</textarea>
                    </div>
                    <div class="exercise-hints">
                        <h4>üí° Hints:</h4>
                        <ul>
                            <li>Set appropriate resource requests and limits</li>
                            <li>Use health checks for better reliability</li>
                            <li>Configure horizontal pod autoscaling</li>
                            <li>Add proper labels and selectors</li>
                        </ul>
                    </div>
                    <div class="exercise-result" id="result3"></div>
                </div>
            </div>

            <!-- Exercise 4: Infrastructure as Code -->
            <div class="exercise" id="exercise4">
                <div class="exercise-header">
                    <h3>üèóÔ∏è Exercise 4: Infrastructure as Code</h3>
                    <p>Create a Terraform configuration for AWS infrastructure</p>
                </div>
                <div class="exercise-content">
                    <div class="code-editor">
                        <div class="editor-header">
                            <span>main.tf</span>
                            <button class="run-btn" onclick="runExercise(4)">Run & Validate</button>
                        </div>
                        <textarea id="code4" placeholder="Write your Terraform configuration here...">terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = "us-west-2"
}

resource "aws_vpc" "main" {
  cidr_block           = "10.0.0.0/16"
  enable_dns_hostnames = true
  enable_dns_support   = true

  tags = {
    Name = "frontend-app-vpc"
  }
}

resource "aws_subnet" "public" {
  vpc_id                  = aws_vpc.main.id
  cidr_block              = "10.0.1.0/24"
  availability_zone       = "us-west-2a"
  map_public_ip_on_launch = true

  tags = {
    Name = "frontend-app-public-subnet"
  }
}

resource "aws_internet_gateway" "main" {
  vpc_id = aws_vpc.main.id

  tags = {
    Name = "frontend-app-igw"
  }
}

resource "aws_route_table" "public" {
  vpc_id = aws_vpc.main.id

  route {
    cidr_block = "0.0.0.0/0"
    gateway_id = aws_internet_gateway.main.id
  }

  tags = {
    Name = "frontend-app-public-rt"
  }
}</textarea>
                    </div>
                    <div class="exercise-hints">
                        <h4>üí° Hints:</h4>
                        <ul>
                            <li>Use variables for reusable configurations</li>
                            <li>Add security groups for proper access control</li>
                            <li>Include load balancers and auto-scaling groups</li>
                            <li>Use data sources for existing resources</li>
                        </ul>
                    </div>
                    <div class="exercise-result" id="result4"></div>
                </div>
            </div>

            <!-- Exercise 5: Monitoring & Logging -->
            <div class="exercise" id="exercise5">
                <div class="exercise-header">
                    <h3>üìä Exercise 5: Monitoring & Logging</h3>
                    <p>Create a comprehensive monitoring setup with Prometheus and Grafana</p>
                </div>
                <div class="exercise-content">
                    <div class="code-editor">
                        <div class="editor-header">
                            <span>docker-compose.monitoring.yml</span>
                            <button class="run-btn" onclick="runExercise(5)">Run & Validate</button>
                        </div>
                        <textarea id="code5" placeholder="Write your monitoring configuration here...">version: '3.8'

services:
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--storage.tsdb.retention.time=200h'
      - '--web.enable-lifecycle'

  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    ports:
      - "3000:3000"
    volumes:
      - grafana_data:/var/lib/grafana
      - ./grafana/provisioning:/etc/grafana/provisioning
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
      - GF_USERS_ALLOW_SIGN_UP=false

  node-exporter:
    image: prom/node-exporter:latest
    container_name: node-exporter
    ports:
      - "9100:9100"
    volumes:
      - /proc:/host/proc:ro
      - /sys:/host/sys:ro
      - /:/rootfs:ro
    command:
      - '--path.procfs=/host/proc'
      - '--path.rootfs=/rootfs'
      - '--path.sysfs=/host/sys'
      - '--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)'

volumes:
  prometheus_data:
  grafana_data:</textarea>
                    </div>
                    <div class="exercise-hints">
                        <h4>üí° Hints:</h4>
                        <ul>
                            <li>Configure proper data retention policies</li>
                            <li>Set up alerting rules for critical metrics</li>
                            <li>Use persistent volumes for data storage</li>
                            <li>Include log aggregation with ELK stack</li>
                        </ul>
                    </div>
                    <div class="exercise-result" id="result5"></div>
                </div>
            </div>
        </div>

        <div class="level-actions">
            <button class="btn btn-secondary" onclick="resetLevel()">Reset Level</button>
            <button class="btn btn-primary" onclick="completeLevel()">Complete Level</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/shell/shell.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/yaml/yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="level17-script.js"></script>
</body>
</html>
