<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 4 Assessment - Asynchronous JavaScript & Promises</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .content {
            padding: 40px;
        }
        
        .question {
            margin-bottom: 30px;
            padding: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }
        
        .question h3 {
            color: #333;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .question p {
            margin-bottom: 15px;
            color: #555;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .options {
            margin: 15px 0;
        }
        
        .option {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .option:hover {
            background-color: #f0f0f0;
        }
        
        .option.selected {
            background-color: #e3f2fd;
            border-color: #2196f3;
        }
        
        .option.correct {
            background-color: #c8e6c9;
            border-color: #4caf50;
        }
        
        .option.incorrect {
            background-color: #ffcdd2;
            border-color: #f44336;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            margin: 20px 0;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .result h2 {
            margin-top: 0;
            color: #2d3748;
        }
        
        .score {
            font-size: 2em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .score.excellent {
            color: #4caf50;
        }
        
        .score.good {
            color: #ff9800;
        }
        
        .score.needs-improvement {
            color: #f44336;
        }
        
        .explanation {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .explanation h4 {
            margin-top: 0;
            color: #2e7d32;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .timer {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .timer h3 {
            margin: 0;
            color: #856404;
        }
        
        .timer.warning {
            background: #f8d7da;
            border-color: #f5c6cb;
        }
        
        .timer.warning h3 {
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Level 4 Assessment</h1>
            <p>Asynchronous JavaScript & Promises</p>
        </div>
        
        <div class="content">
            <div class="timer" id="timer">
                <h3>Time Remaining: <span id="time-display">30:00</span></h3>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <form id="assessment-form">
                <!-- Question 1 -->
                <div class="question" data-question="1">
                    <h3>Question 1: Promise Basics</h3>
                    <p>What will be the output of the following code?</p>
                    <div class="code-block">
console.log('1');
setTimeout(() => console.log('2'), 0);
Promise.resolve().then(() => console.log('3'));
console.log('4');
                    </div>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> 1, 2, 3, 4
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> 1, 4, 3, 2
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> 1, 4, 2, 3
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> 4, 1, 3, 2
                        </div>
                    </div>
                </div>
                
                <!-- Question 2 -->
                <div class="question" data-question="2">
                    <h3>Question 2: Async/Await</h3>
                    <p>Which of the following is the correct way to handle errors in async/await?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> 
                            <div class="code-block">
async function fetchData() {
    const data = await fetch('/api/data');
    return data.json();
}
                            </div>
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong>
                            <div class="code-block">
async function fetchData() {
    try {
        const data = await fetch('/api/data');
        return data.json();
    } catch (error) {
        console.error(error);
        throw error;
    }
}
                            </div>
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong>
                            <div class="code-block">
async function fetchData() {
    const data = await fetch('/api/data').catch(console.error);
    return data.json();
}
                            </div>
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong>
                            <div class="code-block">
function fetchData() {
    fetch('/api/data')
        .then(data => data.json())
        .catch(console.error);
}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Question 3 -->
                <div class="question" data-question="3">
                    <h3>Question 3: Promise Chaining</h3>
                    <p>What will be the output of the following Promise chain?</p>
                    <div class="code-block">
Promise.resolve(1)
    .then(x => x + 1)
    .then(x => x * 2)
    .then(x => console.log(x))
    .catch(x => console.error(x));
                    </div>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> 2
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> 3
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> 4
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> 6
                        </div>
                    </div>
                </div>
                
                <!-- Question 4 -->
                <div class="question" data-question="4">
                    <h3>Question 4: Event Loop</h3>
                    <p>In the JavaScript Event Loop, which queue has the highest priority?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> Macrotask Queue
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> Microtask Queue
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> Call Stack
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> Web APIs
                        </div>
                    </div>
                </div>
                
                <!-- Question 5 -->
                <div class="question" data-question="5">
                    <h3>Question 5: Promise.all vs Promise.allSettled</h3>
                    <p>What is the difference between Promise.all() and Promise.allSettled()?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> Promise.all() waits for all promises to resolve, Promise.allSettled() waits for all to settle
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> Promise.all() waits for all promises to settle, Promise.allSettled() waits for all to resolve
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> There is no difference between them
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> Promise.all() is faster than Promise.allSettled()
                        </div>
                    </div>
                </div>
                
                <!-- Question 6 -->
                <div class="question" data-question="6">
                    <h3>Question 6: Fetch API</h3>
                    <p>What is the correct way to make a POST request with JSON data using the Fetch API?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong>
                            <div class="code-block">
fetch('/api/data', {
    method: 'POST',
    body: JSON.stringify({name: 'John'})
});
                            </div>
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong>
                            <div class="code-block">
fetch('/api/data', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({name: 'John'})
});
                            </div>
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong>
                            <div class="code-block">
fetch('/api/data', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: {name: 'John'}
});
                            </div>
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong>
                            <div class="code-block">
fetch('/api/data', {
    method: 'POST',
    data: {name: 'John'}
});
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Question 7 -->
                <div class="question" data-question="7">
                    <h3>Question 7: Error Handling</h3>
                    <p>What will happen if a Promise is rejected and there's no .catch() handler?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> The error will be silently ignored
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> The error will be logged to the console
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> The error will cause an unhandled promise rejection
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> The Promise will automatically retry
                        </div>
                    </div>
                </div>
                
                <!-- Question 8 -->
                <div class="question" data-question="8">
                    <h3>Question 8: Async Function Return</h3>
                    <p>What does an async function always return?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> The actual value
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> A Promise
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> undefined
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> A callback function
                        </div>
                    </div>
                </div>
                
                <!-- Question 9 -->
                <div class="question" data-question="9">
                    <h3>Question 9: Promise.race()</h3>
                    <p>What does Promise.race() do?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> Waits for all promises to complete
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> Returns the first promise that settles (resolves or rejects)
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> Returns the first promise that resolves
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> Returns the fastest promise
                        </div>
                    </div>
                </div>
                
                <!-- Question 10 -->
                <div class="question" data-question="10">
                    <h3>Question 10: Web APIs</h3>
                    <p>Which of the following is NOT a Web API?</p>
                    <div class="options">
                        <div class="option" data-answer="a">
                            <strong>A)</strong> Fetch API
                        </div>
                        <div class="option" data-answer="b">
                            <strong>B)</strong> Geolocation API
                        </div>
                        <div class="option" data-answer="c">
                            <strong>C)</strong> setTimeout
                        </div>
                        <div class="option" data-answer="d">
                            <strong>D)</strong> console.log
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn" id="submit-btn">Submit Assessment</button>
            </form>
            
            <div class="result" id="result" style="display: none;">
                <h2>Assessment Results</h2>
                <div class="score" id="score">0/10</div>
                <p id="feedback"></p>
                <div class="explanation" id="explanation" style="display: none;">
                    <h4>Explanations:</h4>
                    <div id="explanations-content"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Assessment data
        const questions = [
            {
                id: 1,
                correct: 'b',
                explanation: 'The correct order is 1, 4, 3, 2. Synchronous code runs first (1, 4), then microtasks (3), then macrotasks (2).'
            },
            {
                id: 2,
                correct: 'b',
                explanation: 'Option B is correct. It uses try/catch to handle errors in async/await, which is the proper way to handle errors.'
            },
            {
                id: 3,
                correct: 'c',
                explanation: 'The Promise chain: 1 → 1+1=2 → 2*2=4. So the output is 4.'
            },
            {
                id: 4,
                correct: 'b',
                explanation: 'The Microtask Queue has the highest priority in the Event Loop, followed by the Call Stack, then the Macrotask Queue.'
            },
            {
                id: 5,
                correct: 'a',
                explanation: 'Promise.all() waits for all promises to resolve (fails if any reject), while Promise.allSettled() waits for all to settle (resolves or rejects).'
            },
            {
                id: 6,
                correct: 'b',
                explanation: 'Option B is correct. It includes the proper Content-Type header and uses JSON.stringify() for the body.'
            },
            {
                id: 7,
                correct: 'c',
                explanation: 'An unhandled promise rejection will occur, which can cause the application to crash or log an error.'
            },
            {
                id: 8,
                correct: 'b',
                explanation: 'Async functions always return a Promise, even if you return a regular value.'
            },
            {
                id: 9,
                correct: 'b',
                explanation: 'Promise.race() returns the first promise that settles (either resolves or rejects), not just the first that resolves.'
            },
            {
                id: 10,
                correct: 'd',
                explanation: 'console.log is a built-in JavaScript function, not a Web API. The others are Web APIs provided by the browser.'
            }
        ];
        
        let timeLeft = 30 * 60; // 30 minutes in seconds
        let timerInterval;
        let userAnswers = {};
        
        // Initialize assessment
        function initAssessment() {
            // Start timer
            startTimer();
            
            // Add event listeners
            document.getElementById('assessment-form').addEventListener('submit', handleSubmit);
            
            // Add click listeners to options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const question = this.closest('.question');
                    const questionId = question.dataset.question;
                    
                    // Remove previous selection
                    question.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selection to clicked option
                    this.classList.add('selected');
                    
                    // Store answer
                    userAnswers[questionId] = this.dataset.answer;
                    
                    // Update progress
                    updateProgress();
                });
            });
        }
        
        // Start timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleSubmit();
                }
            }, 1000);
        }
        
        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('time-display').textContent = timeString;
            
            // Add warning when time is low
            const timer = document.getElementById('timer');
            if (timeLeft <= 5 * 60) { // 5 minutes
                timer.classList.add('warning');
            }
        }
        
        // Update progress bar
        function updateProgress() {
            const totalQuestions = questions.length;
            const answeredQuestions = Object.keys(userAnswers).length;
            const progress = (answeredQuestions / totalQuestions) * 100;
            
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }
        
        // Handle form submission
        function handleSubmit(event) {
            if (event) {
                event.preventDefault();
            }
            
            // Stop timer
            clearInterval(timerInterval);
            
            // Calculate score
            const score = calculateScore();
            const percentage = (score / questions.length) * 100;
            
            // Show results
            showResults(score, percentage);
            
            // Disable form
            document.getElementById('submit-btn').disabled = true;
        }
        
        // Calculate score
        function calculateScore() {
            let score = 0;
            
            questions.forEach(question => {
                if (userAnswers[question.id] === question.correct) {
                    score++;
                }
            });
            
            return score;
        }
        
        // Show results
        function showResults(score, percentage) {
            const resultDiv = document.getElementById('result');
            const scoreDiv = document.getElementById('score');
            const feedbackDiv = document.getElementById('feedback');
            const explanationDiv = document.getElementById('explanation');
            const explanationsContent = document.getElementById('explanations-content');
            
            // Show result div
            resultDiv.style.display = 'block';
            
            // Update score
            scoreDiv.textContent = `${score}/${questions.length}`;
            
            // Add score class
            if (percentage >= 80) {
                scoreDiv.classList.add('excellent');
                feedbackDiv.textContent = 'Excellent! You have a strong understanding of asynchronous JavaScript and Promises.';
            } else if (percentage >= 60) {
                scoreDiv.classList.add('good');
                feedbackDiv.textContent = 'Good job! You have a solid understanding, but there\'s room for improvement.';
            } else {
                scoreDiv.classList.add('needs-improvement');
                feedbackDiv.textContent = 'Keep studying! Review the asynchronous JavaScript concepts and try again.';
            }
            
            // Show explanations
            explanationDiv.style.display = 'block';
            explanationsContent.innerHTML = '';
            
            questions.forEach(question => {
                const explanationDiv = document.createElement('div');
                explanationDiv.innerHTML = `
                    <h5>Question ${question.id}:</h5>
                    <p>${question.explanation}</p>
                `;
                explanationsContent.appendChild(explanationDiv);
            });
            
            // Scroll to results
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initAssessment);
    </script>
</body>
</html>


