<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frontend Mastery Hub — Badges</title>
  <style>
    :root {
      --bronze: #B87333;
      --silver: #C0C0C0;
      --gold: #FFD200;
      --diamond: #00CFFF;
      --text: #0f172a;
      --muted: #475569;
      --bg: #f8fafc;
      --card: #ffffff;
      --border: #e2e8f0;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    header {
      padding: 28px 20px 8px;
      max-width: 1200px;
      margin: 0 auto;
    }
    header h1 { margin: 0 0 6px; font-size: 28px; letter-spacing: -0.02em; }
    header p { margin: 0; color: var(--muted); }

    .table-wrap { max-width: 1200px; margin: 16px auto 48px; padding: 0 20px 40px; overflow-x: auto; }
    .badge-name { font-weight: 800; font-size: 16px; letter-spacing: -0.01em; }
    .badge-domain { color: var(--muted); font-size: 12px; }
    .badge-summary { color: var(--muted); font-size: 12px; line-height: 1.35; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; }

    /* Table layout for tiers */
    .tiers-table { width: 100%; table-layout: fixed; border-collapse: separate; border-spacing: 8px; }
    .tiers-table th { position: sticky; top: 0; background: var(--bg); z-index: 1; font-size: 12px; font-weight: 800; color: var(--muted); text-transform: uppercase; letter-spacing: .06em; padding: 6px 4px; }
    .tiers-table thead th .bar { display: block; height: 3px; border-radius: 2px; margin-top: 6px; }
    .tiers-table .bronze { background: var(--bronze); }
    .tiers-table .silver { background: var(--silver); }
    .tiers-table .gold { background: var(--gold); }
    .tiers-table .diamond { background: var(--diamond); }

    .cell {
      background: var(--card);
      border: none;
      border-radius: 14px;
      padding: 14px;
      display: grid;
      grid-template-columns: 64px 1fr;
      gap: 12px;
      align-items: start;
      min-height: 104px;
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.05);
    }
    .cell img { width: 56px; height: 56px; display: block; object-fit: contain; }
    .icon { display: grid; justify-items: center; align-content: start; gap: 6px; }
  
    .meta { display: grid; gap: 4px; width: 100%; grid-template-rows: auto 1fr auto; }
    .row { display: flex; align-items: center; gap: 8px; }
    .dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; opacity: .85; }
    .dot.bronze { background: var(--bronze); }
    .dot.silver { background: var(--silver); }
    .dot.gold { background: var(--gold); }
    .dot.diamond { background: var(--diamond); }
    .tier-label { font-weight: 700; font-size: 12px; letter-spacing: .02em; color: var(--muted); }
    .criteria { color: var(--muted); font-size: 12px; line-height: 1.35; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; }
    .level { color: var(--muted); font-size: 12px; }

    footer { max-width: 1200px; margin: 0 auto 40px; padding: 0 20px; color: var(--muted); font-size: 13px; }
    a { color: inherit; }
  </style>
</head>
<body>
  <header>
    <h1>Badge Gallery</h1>
    <p>All badges and tiers from the Frontend Mastery Hub blueprint. SVGs are rendered directly from <code>badges/svg/</code>.</p>
  </header>

  <div class="table-wrap">
    <table class="tiers-table" id="badgesTable" aria-live="polite">
      <thead>
        <tr>
          <th style="width:26%">Badge</th>
          <th>Bronze<span class="bar bronze"></span></th>
          <th>Silver<span class="bar silver"></span></th>
          <th>Gold<span class="bar gold"></span></th>
          <th>Diamond<span class="bar diamond"></span></th>
        </tr>
      </thead>
      <tbody id="badgesBody"></tbody>
    </table>
  </div>

  <footer>
    Data source: <code>badges/badges.json</code>. Icons: <code>badges/svg/&lt;badge-id&gt;-&lt;tier&gt;.svg</code>.
  </footer>

  <script>
    const tierOrder = ["bronze", "silver", "gold", "diamond"];
    const ELEGANT_MODE = true; // set to false to use Bronze/Silver/Gold/Diamond labels/colors
    const tierTitle = ELEGANT_MODE
      ? { bronze: "I", silver: "II", gold: "III", diamond: "IV" }
      : { bronze: "Bronze", silver: "Silver", gold: "Gold", diamond: "Diamond" };
    const neutralTierDot = ELEGANT_MODE
      ? { bronze: "#cbd5e1", silver: "#94a3b8", gold: "#64748b", diamond: "#334155" }
      : { bronze: "var(--bronze)", silver: "var(--silver)", gold: "var(--gold)", diamond: "var(--diamond)" };

    async function loadBadges() {
      const res = await fetch('./badges.json');
      if (!res.ok) throw new Error('Failed to load badges.json');
      const data = await res.json();
      return data.badges || [];
    }

    function createTierCell(id, tierObj) {
      const tier = tierObj.tier;
      const td = document.createElement('td');
      const cell = document.createElement('div');
      cell.className = 'cell';

      const img = document.createElement('img');
      img.loading = 'lazy';
      img.alt = `${id} – ${tierTitle[tier]}`;
      img.width = 56; img.height = 56;
      const src = `./svg/${id}-${tier}.svg`;
      img.src = src;

      const iconWrap = document.createElement('div');
      iconWrap.className = 'icon';
      iconWrap.append(img);

      const meta = document.createElement('div');
      meta.className = 'meta';

      const row1 = document.createElement('div');
      row1.className = 'row';
      const dot = document.createElement('span');
      dot.className = 'dot';
      dot.style.background = neutralTierDot[tier];
      const label = document.createElement('span');
      label.className = 'tier-label';
      label.textContent = tierTitle[tier];
      row1.append(dot, label);

      const criteria = document.createElement('div');
      criteria.className = 'criteria';
      criteria.textContent = tierObj.criteria;

      const level = document.createElement('div');
      level.className = 'level';
      level.textContent = `Earliest unlock: Level ${tierObj.earliestLevel}`;

      meta.append(row1, criteria, level);
      cell.append(iconWrap, meta);
      td.append(cell);
      return td;
    }
    function createRow(badge) {
      const tr = document.createElement('tr');
      const badgeTd = document.createElement('td');
      const info = document.createElement('div');
      info.style.display = 'grid';
      info.style.gap = '4px';
      const name = document.createElement('div');
      name.className = 'badge-name';
      name.textContent = badge.name;
      const domain = document.createElement('div');
      domain.className = 'badge-domain';
      domain.textContent = badge.domain;
      const summary = document.createElement('div');
      summary.className = 'badge-summary';
      summary.textContent = badge.summary;
      info.append(name, domain, summary);
      badgeTd.append(info);
      tr.append(badgeTd);

      const sorted = [...badge.tiers].sort((a, b) => tierOrder.indexOf(a.tier) - tierOrder.indexOf(b.tier));
      for (const t of sorted) tr.appendChild(createTierCell(badge.id, t));
      return tr;
    }

    (async () => {
      try {
        if (ELEGANT_MODE) {
          const neutral = { bronze: '#cbd5e1', silver: '#94a3b8', gold: '#64748b', diamond: '#334155' };
          const tiers = ['bronze','silver','gold','diamond'];
          document.querySelectorAll('.bar.bronze').forEach(e => e.style.background = neutral.bronze);
          document.querySelectorAll('.bar.silver').forEach(e => e.style.background = neutral.silver);
          document.querySelectorAll('.bar.gold').forEach(e => e.style.background = neutral.gold);
          document.querySelectorAll('.bar.diamond').forEach(e => e.style.background = neutral.diamond);
          const heads = document.querySelectorAll('.tiers-table thead th');
          tiers.forEach((t, i) => {
            const th = heads[i + 1];
            if (th) th.innerHTML = `${tierTitle[t]}<span class="bar ${t}"></span>`;
          });
        }
        const badges = await loadBadges();
        const tbody = document.getElementById('badgesBody');
        badges.forEach(b => tbody.appendChild(createRow(b)));
      } catch (err) {
        const tbody = document.getElementById('badgesBody');
        const row = document.createElement('tr');
        const td = document.createElement('td');
        td.colSpan = 5;
        td.style.color = '#b91c1c';
        td.textContent = `Failed to load badges: ${err.message}`;
        row.appendChild(td);
        tbody.appendChild(row);
      }
    })();
  </script>
</body>
</html>